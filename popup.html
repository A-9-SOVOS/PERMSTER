<!--
  Arc-9 Open Royalty Agreement — draft
  Copyright (c) A-9-SOVOS

  This file is part of the PERMSTER project. See LICENSE (root) for the Arc-9 license terms.
-->
<!DOCTYPE html>
<html>
<head>
  <style>
    body {
      width: 200px;
      padding: 10px;
      font-family: system-ui, -apple-system, sans-serif;
    }
    .setting {
      display: flex;
      align-items: center;
      margin: 10px 0;
    }
    .switch {
      position: relative;
      display: inline-block;
      width: 40px;
      height: 20px;
      margin-right: 10px;
    }
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 20px;
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: 2px;
      bottom: 2px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    input:checked + .slider {
      background-color: #1DA1F2;
    }
    input:checked + .slider:before {
      transform: translateX(20px);
    }
    #status {
      font-size: 12px;
      margin-top: 10px;
      color: #666;
    }
  </style>
</head>
<body>
  <div class="setting">
    <div style="display:flex;flex-direction:column; width:100%; margin-bottom:8px;">
      <label for="thresholdInput" style="font-size:12px; margin-bottom:4px;">Minimum % likes per views (0.01 - 100)</label>
      <input id="thresholdInput" type="number" step="0.01" min="0.01" max="100" style="width:100%; padding:6px; border-radius:4px; border:1px solid #ccc;" />
      <div id="thresholdMsg" style="font-size:11px; color:#666; margin-top:4px;">Leave empty to show all posts</div>
      <div id="thresholdLegal" style="font-size:11px; color:#e74c3c; margin-top:6px;">Be advised: setting this value high enough to filter all posts as a way to collect data would constitute scraping; this is considered bad form and may be illegal in your jurisdiction. Please dont.</div>
    </div>
  </div>
    <div class="setting">
      <div style="display:flex;flex-direction:column; width:100%; margin-bottom:8px;">
        <label for="saveEveryInput" style="font-size:12px; margin-bottom:4px;">Save every N datapoints (default 500)</label>
        <input id="saveEveryInput" type="number" step="1" min="1" placeholder="500" style="width:100%; padding:6px; border-radius:4px; border:1px solid #ccc;" />
        <div id="saveEveryMsg" style="font-size:11px; color:#666; margin-top:4px;">Set how many datapoints trigger an automatic save</div>
      </div>
    </div>
  <div class="setting">
    <label class="switch">
      <input type="checkbox" id="dataCollection">
      <span class="slider"></span>
    </label>
    <span>Enable Data Collection</span>
  </div>
  <!-- Extension always restricts collection to the For You feed when enabled; control removed -->
  <div class="setting">
    <div style="display:flex;flex-direction:column; width:100%; margin-bottom:8px;">
      <label style="font-size:12px; display:flex; align-items:center; gap:8px;">
        <input type="checkbox" id="showZeros" />
        <span>Include zero-engagement posts (includes freshly-seen posts; reduces filtering)</span>
      </label>

      <div id="onlyZerosWrap" style="display:none; margin-top:8px; width:100%;">
        <label style="font-size:12px; display:flex; align-items:center; gap:8px; width:100%;">
          <input type="checkbox" id="onlyZeros" />
          <span>Only show zero-engagement posts</span>
        </label>
        <div id="onlyZerosWarning" style="font-size:11px; color:#e6b000; margin-top:6px; display:block;">Caution: this is a very aggressive filter (will only show items with zero engagement).</div>
      </div>
    </div>
  </div>
  <!-- Auto-save via background worker; manual button removed -->
  <div id="status"></div>
  <div style="margin-top:8px; display:flex;flex-direction:column; align-items:center; gap:6px;">
    <div style="font-weight:700; color:#2ecc71;">TIP</div>
    <img id="tipImage" src="Tip.png" alt="Tip" style="max-width:100%; height:auto; border-radius:6px;" />
  </div>
  <div style="margin-top:8px; font-size:11px; color:#666; display:flex; gap:8px; align-items:center;">
    <button id="clearProcessed" style="padding:4px 8px; border-radius:4px; border:1px solid #ccc; background:#fff; cursor:pointer;">Clear processed IDs</button>
    <div id="processedCount">processed: —</div>
  </div>
  <script src="popup.js"></script>
</body>
</html>